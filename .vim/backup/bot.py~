#!/usr/bin/env python

import socket

buffer = ''
s = socket.socket()
s.connect(('irc.freenode.net', 6667))
s.send('NICK idbot\r\n')
s.send('USER idbot 0 :idbot\r\n')
s.send('PRIVMSG Industrial lulz\r\n')

while True:
    buffer = buffer + s.recv(1024)

    if buffer.find('\r\n'):
        line_parts = buffer.partition('\r\n')
        line = line_parts[0]
        buffer = line_parts[2]

        print line

        if line[0] == 'PING':
            s.send('PONG %s\r\n' % line[1])

